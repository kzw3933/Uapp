CREATE DATABASE IF NOT EXISTS UAPP CHARACTER SET utf8;

USE UAPP;

CREATE TABLE IF NOT EXISTS User (
  StudentID VARCHAR(10) NOT NULL PRIMARY KEY,
  Username VARCHAR(20) NOT NULL,
  Email VARCHAR(50) NOT NULL,
  Password VARCHAR(20) NOT NULL,
  Contact VARCHAR(20),
  RegisterTime TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS Item (
  ItemID INT PRIMARY KEY AUTO_INCREMENT,
  ItemTime BIGINT,
  ItemType VARCHAR(30),
  ItemImgName VARCHAR(255),
  ItemLocation VARCHAR(255) NOT NULL,
  ItemDescription VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS LostPost (
  PostID VARCHAR(64) PRIMARY KEY,
  StudentID VARCHAR(10) NOT NULL,
  ItemID INT NOT NULL,
  Available BOOL DEFAULT TRUE,
  PostTime BIGINT,
  FOREIGN KEY (StudentID) REFERENCES User(StudentID),
  FOREIGN KEY (ItemID) REFERENCES Item(ItemID)
);

CREATE TABLE IF NOT EXISTS FoundPost (
  PostID VARCHAR(64) PRIMARY KEY,
  StudentID VARCHAR(10) NOT NULL,
  ItemID INT NOT NULL,
  Available BOOL DEFAULT TRUE,
  PostTime BIGINT,
  FOREIGN KEY (StudentID) REFERENCES User(StudentID),
  FOREIGN KEY (ItemID) REFERENCES Item(ItemID)
);

CREATE TABLE IF NOT EXISTS LostReply (
  ReplyID INT PRIMARY KEY AUTO_INCREMENT,
  PostID VARCHAR(255) NOT NULL,
  StudentID VARCHAR(10) NOT NULL,
  ReplyTime BIGINT,
  ReplyContent VARCHAR(255) NOT NULL,
  FOREIGN KEY (PostID) REFERENCES LostPost(PostID),
  FOREIGN KEY (StudentID) REFERENCES User(StudentID)
);

CREATE TABLE IF NOT EXISTS FoundReply (
  ReplyID INT PRIMARY KEY AUTO_INCREMENT,
  PostID VARCHAR(255) NOT NULL,
  StudentID VARCHAR(10) NOT NULL,
  ReplyTime BIGINT,
  ReplyContent VARCHAR(255) NOT NULL,
  FOREIGN KEY (PostID) REFERENCES FoundPost(PostID),
  FOREIGN KEY (StudentID) REFERENCES User(StudentID)
);










